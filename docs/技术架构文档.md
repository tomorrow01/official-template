# 官网项目技术架构文档

## 目录

[1. 项目概述](#1-项目概述)
[2. 系统架构](#2-系统架构)
[3. 技术栈](#3-技术栈)
[4. 目录结构](#4-目录结构)
[5. 核心功能模块](#5-核心功能模块)
[6. 数据流](#6-数据流)
[7. 技术特点](#7-技术特点)
[8. 安全性考虑](#8-安全性考虑)
[9. 性能优化](#9-性能优化)
[10. 部署架构](#10-部署架构)

---

## 1. 项目概述

本项目是一个完整的官网解决方案，包含前端展示网站、后端API服务和管理后台三个主要部分。项目采用现代化的前后端分离架构，支持内容管理、数据展示和管理操作，提供灵活的部署方式和良好的可维护性。

### 主要功能特点
- 响应式前端展示，支持多设备访问
- 完整的内容管理功能（文章、轮播图、案例、服务等）
- RESTful API接口设计
- 图片上传管理
- 数据库自动初始化和默认数据填充
- 错误处理和降级方案

## 2. 系统架构

### 2.1 整体架构

项目采用经典的前后端分离三层架构：

```
┌─────────────────────────────────────────────┐
│                客户端层                      │
│  ┌─────────────────┐  ┌──────────────────┐   │
│  │  前端展示网站   │  │   管理后台系统   │   │
│  │ (Nuxt.js + TS)  │  │ (Vue 3 + Vite)   │   │
│  └─────────────────┘  └──────────────────┘   │
└─────────────────────────────────────────────┘
                       │
                       ▼
┌─────────────────────────────────────────────┐
│                服务层                        │
│  ┌─────────────────────────────────────────┐ │
│  │      Express.js RESTful API服务          │ │
│  │  ┌────────────┐  ┌──────────────┐       │ │
│  │  │  路由管理  │  │  文件上传处理  │       │ │
│  │  └────────────┘  └──────────────┘       │ │
│  │  ┌────────────┐  ┌──────────────┐       │ │
│  │  │  数据校验  │  │  错误处理降级  │       │ │
│  │  └────────────┘  └──────────────┘       │ │
│  └─────────────────────────────────────────┘ │
└─────────────────────────────────────────────┘
                       │
                       ▼
┌─────────────────────────────────────────────┐
│                数据层                        │
│  ┌─────────────────────────────────────────┐ │
│  │           MongoDB数据库                   │ │
│  │  ┌────────────┐  ┌──────────────┐       │ │
│  │  │  数据模型  │  │  默认数据初始化 │       │ │
│  │  └────────────┘  └──────────────┘       │ │
│  └─────────────────────────────────────────┘ │
└─────────────────────────────────────────────┘
```

### 2.2 组件关系图

各组件间的交互关系如下：

1. **前端展示网站**：通过API调用获取后端数据，展示给最终用户
2. **管理后台**：提供内容管理界面，通过API对数据进行CRUD操作
3. **后端服务**：提供RESTful API接口，处理数据请求，与数据库交互
4. **MongoDB**：持久化存储数据，支持数据查询和更新

## 3. 技术栈

### 3.1 前端展示网站

| 技术/框架    | 版本        | 用途                          | 来源                                    |
|------------|------------|------------------------------|----------------------------------------|
| Nuxt.js    | 3.x        | 前端框架，支持服务端渲染和静态生成      | <mcfile name="nuxt.config.ts" path="/Users/xuyumei/code/project/official-template/frontend/nuxt.config.ts"></mcfile> |
| Vue.js     | 3.x        | 渐进式JavaScript框架          | <mcfile name="nuxt.config.ts" path="/Users/xuyumei/code/project/official-template/frontend/nuxt.config.ts"></mcfile> |
| TypeScript | 5.x        | 静态类型检查                  | <mcfile name="tsconfig.json" path="/Users/xuyumei/code/project/official-template/frontend/tsconfig.json"></mcfile> |
| Element Plus | -        | UI组件库                     | <mcfile name="nuxt.config.ts" path="/Users/xuyumei/code/project/official-template/frontend/nuxt.config.ts"></mcfile> |
| Axios      | -          | HTTP客户端，处理API请求       | <mcfile name="request.ts" path="/Users/xuyumei/code/project/official-template/frontend/api/request.ts"></mcfile> |
| Vite       | -          | 前端构建工具                  | 集成在Nuxt.js中 |

### 3.2 后端服务

| 技术/框架    | 版本        | 用途                          | 来源                                    |
|------------|------------|------------------------------|----------------------------------------|
| Node.js    | -          | JavaScript运行环境           | <mcfile name="package.json" path="/Users/xuyumei/code/project/official-template/backend/package.json"></mcfile> |
| Express.js | -          | Web应用框架                  | <mcfile name="index.js" path="/Users/xuyumei/code/project/official-template/backend/src/index.js"></mcfile> |
| MongoDB    | -          | NoSQL数据库                  | <mcfile name="db.js" path="/Users/xuyumei/code/project/official-template/backend/src/utils/db.js"></mcfile> |
| Mongoose   | -          | MongoDB对象建模工具           | <mcfile name="Banner.js" path="/Users/xuyumei/code/project/official-template/backend/src/models/Banner.js"></mcfile> |
| Multer     | -          | 文件上传中间件                | <mcfile name="index.js" path="/Users/xuyumei/code/project/official-template/backend/src/index.js"></mcfile> |
| CORS       | -          | 跨域资源共享中间件            | <mcfile name="index.js" path="/Users/xuyumei/code/project/official-template/backend/src/index.js"></mcfile> |

### 3.3 管理后台

| 技术/框架    | 版本        | 用途                          | 来源                                    |
|------------|------------|------------------------------|----------------------------------------|
| Vue.js     | 3.x        | 渐进式JavaScript框架          | <mcfile name="package.json" path="/Users/xuyumei/code/project/official-template/admin/package.json"></mcfile> |
| Vite       | -          | 前端构建工具                  | <mcfile name="vite.config.js" path="/Users/xuyumei/code/project/official-template/admin/vite.config.js"></mcfile> |
| Element Plus | -        | UI组件库                     | <mcfile name="main.js" path="/Users/xuyumei/code/project/official-template/admin/src/main.js"></mcfile> |
| Vue Router | 4.x        | 路由管理                      | <mcfile name="index.js" path="/Users/xuyumei/code/project/official-template/admin/src/router/index.js"></mcfile> |
| Axios      | -          | HTTP客户端，处理API请求       | <mcfile name="api.js" path="/Users/xuyumei/code/project/official-template/admin/src/utils/api.js"></mcfile> |

## 4. 目录结构

### 4.1 项目根目录结构

```
/official-template/
├── .env                  # 环境变量配置文件
├── README.md             # 项目说明文档
├── admin/                # 管理后台目录
├── backend/              # 后端服务目录
└── frontend/             # 前端展示网站目录
```

### 4.2 前端展示网站结构

```
frontend/
├── api/                  # API请求相关文件
│   ├── articles.ts       # 文章相关API
│   ├── banner.ts         # 轮播图相关API
│   ├── cases.ts          # 案例相关API
│   ├── config.ts         # API配置
│   ├── request.ts        # 请求封装
│   └── services.ts       # 服务相关API
├── assets/               # 静态资源
│   └── css/              # 样式文件
├── components/           # Vue组件
│   ├── Banner.vue        # 轮播图组件
│   ├── Footer.vue        # 页脚组件
│   └── Navbar.vue        # 导航栏组件
├── composables/          # 组合式函数
├── pages/                # 页面组件
│   ├── about.vue         # 关于页面
│   ├── index.vue         # 首页
│   └── services.vue      # 服务页面
├── public/               # 公共静态资源
├── server/               # 服务器相关文件
├── stores/               # 状态管理
├── app.vue               # 根组件
└── nuxt.config.ts        # Nuxt配置文件
```

### 4.3 后端服务结构

```
backend/
├── src/
│   ├── data/             # 数据文件
│   ├── models/           # 数据模型
│   │   ├── Banner.js     # 轮播图模型
│   │   └── ...           # 其他模型
│   ├── routes/           # 路由定义
│   │   ├── articles.js   # 文章路由
│   │   ├── banners.js    # 轮播图路由
│   │   └── ...           # 其他路由
│   ├── utils/            # 工具函数
│   │   ├── db.js         # 数据库连接工具
│   │   └── response.js   # 响应处理工具
│   └── index.js          # 入口文件
├── uploads/              # 上传文件目录
└── package.json          # 项目配置文件
```

### 4.4 管理后台结构

```
admin/
├── src/
│   ├── assets/           # 静态资源
│   ├── components/       # 自定义组件
│   ├── router/           # 路由配置
│   │   └── index.js      # 路由入口
│   ├── utils/            # 工具函数
│   │   └── api.js        # API调用封装
│   ├── views/            # 页面视图
│   │   ├── Banners.vue   # 轮播图管理
│   │   ├── Articles.vue  # 文章管理
│   │   └── ...           # 其他管理页面
│   ├── App.vue           # 根组件
│   └── main.js           # 入口文件
├── index.html            # HTML模板
└── vite.config.js        # Vite配置
```

## 5. 核心功能模块

### 5.1 轮播图管理

轮播图模块用于网站首页的轮播展示，支持图片上传、链接设置和排序管理。

**功能特点：**
- 支持轮播图的增删改查
- 提供图片预览功能
- 支持轮播顺序调整
- 可切换轮播图激活状态

**相关文件：**
- 前端组件：<mcfile name="Banner.vue" path="/Users/xuyumei/code/project/official-template/frontend/components/Banner.vue"></mcfile>
- 前端API：<mcfile name="banner.ts" path="/Users/xuyumei/code/project/official-template/frontend/api/banner.ts"></mcfile>
- 后端模型：<mcfile name="Banner.js" path="/Users/xuyumei/code/project/official-template/backend/src/models/Banner.js"></mcfile>
- 后端路由：<mcfile name="banners.js" path="/Users/xuyumei/code/project/official-template/backend/src/routes/banners.js"></mcfile>
- 管理页面：<mcfile name="Banners.vue" path="/Users/xuyumei/code/project/official-template/admin/src/views/Banners.vue"></mcfile>

### 5.2 文章管理

文章管理模块用于发布和管理网站的文章内容，支持文章的创建、编辑、删除和状态管理。

**功能特点：**
- 支持文章内容编辑和格式设置
- 支持文章排序和状态管理
- 提供文章列表展示和搜索

**相关文件：**
- 前端API：<mcfile name="articles.ts" path="/Users/xuyumei/code/project/official-template/frontend/api/articles.ts"></mcfile>
- 后端路由：<mcfile name="articles.js" path="/Users/xuyumei/code/project/official-template/backend/src/routes/articles.js"></mcfile>
- 管理页面：<mcfile name="Articles.vue" path="/Users/xuyumei/code/project/official-template/admin/src/views/Articles.vue"></mcfile>

### 5.3 案例和服务管理

案例和服务模块用于展示公司的项目案例和服务内容，支持相关信息的管理和展示。

**功能特点：**
- 支持案例和服务信息的增删改查
- 提供分类和排序功能
- 支持图片上传和展示

**相关文件：**
- 前端API：<mcfile name="cases.ts" path="/Users/xuyumei/code/project/official-template/frontend/api/cases.ts"></mcfile>、<mcfile name="services.ts" path="/Users/xuyumei/code/project/official-template/frontend/api/services.ts"></mcfile>
- 后端路由：<mcfile name="cases.js" path="/Users/xuyumei/code/project/official-template/backend/src/routes/cases.js"></mcfile>、<mcfile name="services.js" path="/Users/xuyumei/code/project/official-template/backend/src/routes/services.js"></mcfile>

### 5.4 文件上传

文件上传模块提供统一的图片上传功能，支持多种图片格式，有文件大小限制。

**功能特点：**
- 支持JPEG、JPG、PNG、GIF、WebP等格式
- 限制文件大小为5MB
- 自动生成文件名避免冲突
- 提供静态文件访问服务

**相关文件：**
- 后端实现：<mcfile name="index.js" path="/Users/xuyumei/code/project/official-template/backend/src/index.js"></mcfile>

## 6. 数据流

### 6.1 前端数据获取流程

1. 前端组件通过API模块发送请求
2. API模块使用axios发送HTTP请求到后端
3. 后端路由处理请求，查询数据库或返回模拟数据
4. 后端返回统一格式的数据响应
5. 前端接收响应，处理数据并渲染页面

### 6.2 管理后台数据操作流程

1. 管理后台用户填写表单并提交
2. 表单数据通过API模块发送到后端
3. 后端验证数据并更新数据库
4. 后端返回操作结果
5. 管理后台更新界面显示并提供反馈

### 6.3 数据库初始化流程

1. 后端服务启动时尝试连接MongoDB
2. 连接成功后检查是否存在默认数据
3. 如无默认数据，则插入预设的轮播图、服务、案例和文章数据
4. 如连接失败，记录警告并继续使用模拟数据

## 7. 技术特点

### 7.1 响应式设计

- 前端采用响应式设计，适配不同屏幕尺寸
- 使用Element Plus组件库的响应式特性
- 自定义CSS媒体查询处理特殊布局需求

### 7.2 降级方案

- 后端实现了MongoDB连接失败的降级机制
- 当数据库连接失败时，自动切换到模拟数据
- 确保API接口在各种情况下都能正常响应

### 7.3 统一错误处理

- 前端实现了统一的响应拦截器，处理各种HTTP状态码
- 后端实现了统一的响应格式和错误处理
- 提供友好的错误提示和日志记录

### 7.4 TypeScript支持

- 前端使用TypeScript提供类型安全
- 定义了清晰的数据接口和类型定义
- 提高代码可维护性和开发效率

## 8. 安全性考虑

- 文件上传限制文件类型和大小，防止恶意文件上传
- MongoDB连接使用环境变量配置，避免硬编码敏感信息
- 提供了JWT密钥配置，为后续认证功能做准备
- 实现了请求日志记录，便于安全审计

## 9. 性能优化

- 前端使用Nuxt.js的服务端渲染和静态生成能力
- 实现了合理的数据缓存和组件复用
- 图片资源优化和延迟加载
- 数据库查询优化和索引设计

## 10. 总结

本项目采用现代化的前后端分离架构，技术栈先进，功能完善。通过合理的模块化设计和良好的代码组织，实现了高可维护性和扩展性。项目包含完整的错误处理、降级方案和安全考虑，适合作为企业官网的基础架构使用。